<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUTO-mihoyo-all - ç±³å“ˆæ¸¸æ¸¸æˆè‡ªåŠ¨åŒ–ç®¡ç†å·¥å…·</title>
    <link rel="stylesheet" href="css/main.css">
    <style>
        /* é˜²æ­¢é—ªçƒçš„åˆå§‹æ ·å¼ - å®Œå…¨é¢„è®¾ */
        html, body {
            margin: 0;
            padding: 0;
            background: #1a1a1a !important;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            visibility: visible;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }
        
        /* ç¡®ä¿æ‰€æœ‰å…ƒç´ éƒ½æœ‰æ·±è‰²èƒŒæ™¯ */
        * {
            box-sizing: border-box;
        }
        
        /* åŠ è½½æŒ‡ç¤ºå™¨ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a !important;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.8s ease-out;
        }
        
        .loading-content {
            text-align: center;
            color: white;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 18px;
            font-weight: 500;
            color: #667eea;
        }
        
        /* é¢„è®¾åº”ç”¨å®¹å™¨æ ·å¼é˜²æ­¢å¸ƒå±€é—ªçƒ */
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #1a1a1a;
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }
        
        /* åº”ç”¨å‡†å¤‡å°±ç»ªåçš„æ ·å¼ */
        body.ready .loading-overlay {
            opacity: 0;
            pointer-events: none;
        }
        
        body.ready .app-container {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- åŠ è½½é®ç½© -->
    <div class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">ğŸ® AUTO-mihoyo-all å¯åŠ¨ä¸­...</div>
        </div>
    </div>

    <div class="app-container">
        <!-- æ ‡é¢˜æ  -->
        <header class="app-header">
            <div class="header-content">
                <div class="app-title">
                    <h1>ğŸ® AUTO-mihoyo-all</h1>
                    <p>ç±³å“ˆæ¸¸æ¸¸æˆè‡ªåŠ¨åŒ–ç»Ÿä¸€ç®¡ç†å·¥å…·</p>
                </div>
                <div class="header-actions">
                    <button id="runAllBtn" class="btn btn-success">â–¶ï¸ è¿è¡Œå…¨éƒ¨</button>
                </div>
            </div>
        </header>

        <!-- ä¸»è¦å†…å®¹åŒº -->
        <main class="app-main">
            <!-- ä¾§è¾¹æ  -->
            <aside class="sidebar">
                <nav class="nav-menu">
                    <button class="nav-item active" data-tab="dashboard">ğŸ“Š ä»ªè¡¨ç›˜</button>
                    <button class="nav-item" data-tab="games">ğŸ® æ¸¸æˆé…ç½®</button>
                    <button class="nav-item" data-tab="logs">ğŸ“ å†å²è¿è¡Œæ—¥å¿—</button>
                    <button class="nav-item" data-tab="settings">âš™ï¸ å…¨å±€è®¾ç½®</button>
                </nav>
                
                <!-- çŠ¶æ€é¢æ¿ -->
                <div class="status-panel">
                    <h3>ğŸ“ˆ çŠ¶æ€æ¦‚è§ˆ</h3>
                    <div class="status-item">
                        <span>é…ç½®çŠ¶æ€:</span>
                        <span id="configStatus" class="status-badge">æœªçŸ¥</span>
                    </div>
                    <div class="status-item">
                        <span>å¯ç”¨æ¸¸æˆ:</span>
                        <span id="enabledGames" class="status-number">0</span>
                    </div>
                    
                    <!-- è¿è¡ŒçŠ¶æ€å— -->
                    <div class="status-overview">
                        <h4>ğŸ® è¿è¡ŒçŠ¶æ€</h4>
                        <div class="status-grid-compact">
                            <div class="status-card-compact">
                                <div class="status-icon">ğŸ®</div>
                                <div class="status-info">
                                    <h5>æ´»è·ƒè¿›ç¨‹</h5>
                                    <span id="activeProcessCount" class="status-value">0</span>
                                </div>
                            </div>
                            <div class="status-card-compact">
                                <div class="status-icon">â±ï¸</div>
                                <div class="status-info">
                                    <h5>æ€»è¿è¡Œæ—¶é•¿</h5>
                                    <span id="totalRuntime" class="status-value">00:00:00</span>
                                </div>
                            </div>
                            <div class="status-card-compact">
                                <div class="status-icon">âœ…</div>
                                <div class="status-info">
                                    <h5>ä»Šæ—¥ç­¾åˆ°</h5>
                                    <span id="todaySignIn" class="status-value">æœªæ‰§è¡Œ</span>
                                </div>
                            </div>
                            <div class="status-card-compact">
                                <div class="status-icon">ğŸª™</div>
                                <div class="status-info">
                                    <h5>ç±³æ¸¸å¸</h5>
                                    <span id="mihoyoCoins" class="status-value">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å®æ—¶è¿›ç¨‹çŠ¶æ€ -->
                    <div class="status-overview" id="sidebarProcessSection">
                        <h4>ğŸ”„ å®æ—¶è¿›ç¨‹çŠ¶æ€</h4>
                        <div id="sidebarRealTimeProcesses" class="process-status-list-sidebar">
                            <!-- è¿›ç¨‹çŠ¶æ€å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                    </div>
                    
                    <!-- ç­¾åˆ°è¯¦æƒ… -->
                    <div class="status-overview" id="sidebarSignInSection">
                        <h4>ğŸ ç­¾åˆ°è¯¦æƒ…</h4>
                        <div id="sidebarSignInDetails" class="signin-details-sidebar">
                            <!-- ç­¾åˆ°è¯¦æƒ…å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                    </div>
                </div>
            </aside>

            <!-- å†…å®¹åŒºåŸŸ -->
            <div class="content-area">
                <!-- ä»ªè¡¨ç›˜æ ‡ç­¾é¡µ -->
                <div id="dashboard-tab" class="tab-content active">
                    <div class="tab-header">
                        <h2>ğŸ“Š è¿è¡Œä»ªè¡¨ç›˜</h2>
                        <p>å®æ—¶ç›‘æ§å„é¡¹è¿è¡ŒçŠ¶å†µå’Œå¿«æ·æ“ä½œ</p>
                    </div>
                    
                    <div class="dashboard-container">
                        <!-- å¿«æ·æ“ä½œé¢æ¿ -->
                        <div class="dashboard-section">
                            <h3>ğŸš€ å¿«æ·å¯åŠ¨</h3>
                            <div class="quick-actions">
                                <button id="quickStartMihoyo" class="btn btn-primary">ç±³æ¸¸ç¤¾ç­¾åˆ°</button>
                                <button id="quickStartGenshin" class="btn btn-primary">åŸç¥ä¸€æ¡é¾™</button>
                                <button id="quickStartStarRail" class="btn btn-primary">æ˜Ÿé“ä¸€æ¡é¾™</button>
                                <button id="quickStartZenless" class="btn btn-primary">ç»åŒºé›¶ä¸€æ¡é¾™</button>
                            </div>
                        </div>

                        <!-- æœ€è¿‘æ´»åŠ¨ -->
                        <div class="dashboard-section">
                            <h3>ğŸ“ æœ€è¿‘æ´»åŠ¨</h3>
                            <div id="recentActivity" class="activity-list">
                                <div class="empty-state">æš‚æ— æ´»åŠ¨è®°å½•</div>
                            </div>
                        </div>

                        <!-- å®æ—¶æ—¥å¿—è¾“å‡º -->
                        <div class="dashboard-section">
                            <h3>ğŸ“„ å®æ—¶æ—¥å¿—</h3>
                            <div id="realTimeLogOutput" class="realtime-log-container">
                                <div class="empty-state">ç­‰å¾…ä»»åŠ¡æ‰§è¡Œ...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ¸¸æˆé…ç½®æ ‡ç­¾é¡µ -->
                <div id="games-tab" class="tab-content">
                    <div class="tab-header">
                        <h2>ğŸ® æ¸¸æˆé…ç½®ç®¡ç†</h2>
                        <p>é…ç½®å„ä¸ªç±³å“ˆæ¸¸æ¸¸æˆçš„è‡ªåŠ¨åŒ–è®¾ç½®</p>
                    </div>
                    
                    <div id="gamesContainer" class="games-container">
                        <!-- æ¸¸æˆé…ç½®å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- å†å²è¿è¡Œæ—¥å¿—æ ‡ç­¾é¡µ -->
                <div id="logs-tab" class="tab-content">
                    <div class="tab-header">
                        <h2>ğŸ“ å†å²è¿è¡Œæ—¥å¿—</h2>
                        <p>æŸ¥çœ‹æ¸¸æˆæ‰§è¡Œçš„è¯¦ç»†å†å²æ—¥å¿—è®°å½•</p>
                    </div>
                    
                    <div class="logs-container">
                        <div class="logs-controls">
                            <button id="refreshLogsBtn" class="btn btn-secondary">ğŸ”„ åˆ·æ–°æ—¥å¿—</button>
                            <button id="clearLogsBtn" class="btn btn-warning">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
                        </div>
                        <div id="logsContent" class="logs-content">
                            <div class="empty-state">
                                <p>æš‚æ— æ—¥å¿—è®°å½•</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å…¨å±€è®¾ç½®æ ‡ç­¾é¡µ -->
                <div id="settings-tab" class="tab-content">
                    <div class="tab-header">
                        <h2>âš™ï¸ å…¨å±€è®¾ç½®</h2>
                        <p>é…ç½®åº”ç”¨ç¨‹åºçš„å…¨å±€é€‰é¡¹</p>
                    </div>
                    
                    <div class="settings-container">
                        <div class="setting-group">
                            <h3>ğŸ¨ å¤–è§‚è®¾ç½®</h3>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span id="followSystemThemeLabel">è·Ÿéšç³»ç»Ÿä¸»é¢˜</span>
                                    <small>è‡ªåŠ¨æ ¹æ®ç³»ç»Ÿè®¾ç½®åˆ‡æ¢æµ…è‰²/æ·±è‰²æ¨¡å¼</small>
                                </div>
                                <label class="modern-toggle">
                                    <input type="checkbox" id="followSystemTheme" title="è·Ÿéšç³»ç»Ÿä¸»é¢˜" aria-labelledby="followSystemThemeLabel">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>ä¸»é¢˜æ¨¡å¼</span>
                                    <small>æ‰‹åŠ¨é€‰æ‹©ä¸»é¢˜æ¨¡å¼</small>
                                </div>
                                <div class="modern-select-wrapper">
                                    <select id="themeMode" class="modern-select" title="é€‰æ‹©ä¸»é¢˜æ¨¡å¼">
                                        <option value="light">æµ…è‰²æ¨¡å¼</option>
                                        <option value="dark">æ·±è‰²æ¨¡å¼</option>
                                    </select>
                                    <div class="select-arrow">
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                                            <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>ğŸš€ å¯åŠ¨é€‰é¡¹</h3>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span id="autoRunLabel">å¯ç”¨è‡ªåŠ¨è¿è¡Œæ¨¡å¼</span>
                                    <small>ç¨‹åºå¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰å¯ç”¨çš„æ¸¸æˆ</small>
                                </div>
                                <label class="modern-toggle">
                                    <input type="checkbox" id="autoRunCheckbox" title="å¯ç”¨è‡ªåŠ¨è¿è¡Œæ¨¡å¼" aria-labelledby="autoRunLabel">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h3>ğŸ“ æ—¥å¿—è®¾ç½®</h3>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>æ—¥å¿—çº§åˆ«</span>
                                </div>
                                <div class="modern-select-wrapper">
                                    <select id="logLevel" class="modern-select" title="é€‰æ‹©æ—¥å¿—çº§åˆ«">
                                        <option value="error">é”™è¯¯</option>
                                        <option value="warn">è­¦å‘Š</option>
                                        <option value="info">ä¿¡æ¯</option>
                                        <option value="debug">è°ƒè¯•</option>
                                    </select>
                                    <div class="select-arrow">
                                        <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                                            <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">
                                    <span>æœ€å¤§æ—¥å¿—æ–‡ä»¶æ•°</span>
                                </div>
                                <input type="number" id="maxLogFiles" min="1" max="100" value="10" class="modern-input" title="è®¾ç½®æœ€å¤§æ—¥å¿—æ–‡ä»¶æ•°">
                            </div>
                        </div>

                        <div class="settings-actions">
                            <button id="saveSettingsBtn" class="btn btn-primary">ğŸ’¾ ä¿å­˜è®¾ç½®</button>
                            <button id="resetSettingsBtn" class="btn btn-warning">ğŸ”„ é‡ç½®é»˜è®¤</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- çŠ¶æ€æ  -->
        <footer class="app-footer">
            <div class="footer-content">
                <span id="statusText">å°±ç»ª</span>
                <span id="lastUpdated"></span>
            </div>
        </footer>
    </div>

    <!-- åŠ è½½ä¸­é®ç½© -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>æ­£åœ¨å¤„ç†ä¸­...</p>
        </div>
    </div>

    <!-- é€šçŸ¥å®¹å™¨ -->
    <div id="notifications" class="notifications-container"></div>

    <script>
        // ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½åå†æ˜¾ç¤ºå†…å®¹
        document.addEventListener('DOMContentLoaded', function() {
            // é¢„åŠ è½½æ‰€æœ‰æ ·å¼å’Œèµ„æº
            setTimeout(() => {
                document.body.style.visibility = 'visible';
            }, 50);
        });
        
        // å¤„ç†å­—ä½“å’Œå›¾ç‰‡åŠ è½½
        window.addEventListener('load', function() {
            // æ‰€æœ‰èµ„æºåŒ…æ‹¬å›¾ç‰‡éƒ½å·²åŠ è½½å®Œæˆ
            console.log('é¡µé¢èµ„æºåŠ è½½å®Œæˆ');
        });
    </script>
    <script src="theme-manager.js"></script>
    <script src="app/RewardParser.js"></script>
    <script src="app.js"></script>
</body>
</html>
